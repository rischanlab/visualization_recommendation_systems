package edu.uiuc.zenvisage.classcreation;

import static org.junit.Assert.*;

import java.io.IOException;
import java.sql.SQLException;
import java.util.Scanner;

import org.codehaus.jackson.map.ObjectMapper;
import org.junit.Test;

import edu.uiuc.zenvisage.service.ZvMain;
import edu.uiuc.zenvisage.zqlcomplete.executor.ZQLTable;

public class ClassCreationTest {
	
	
//	"{\"params\":{\"query\":{\"databasename\":\"cmu\"}}}"
//	@Test
//	public void TestGetInterfaceFormData() throws SQLException {
//
//		String input = "{\"databasename\":\"cmu\"}";
//		
//		try {
//			ZvMain zvMain = new ZvMain();
//			//zvMain.getInterfaceFomData(setDatabase);
//			zvMain.databaseName = "cmu";
//			zvMain.getInterfaceFomData(input);
//			System.out.println("asdf");
//			//assertFalse(outputGraphExecutor.equals(nullOutput));
//		} catch (IOException | InterruptedException e) {
//			// TODO Auto-generated catch block
//			e.printStackTrace();
//		}	
//	}
	
//	@Test
//	public void TestRepresentativeTestCall() throws SQLException {
//
//		String input = "{\"method\":\"RepresentativeTrends\",\"xAxis\":\"ip\",\"yAxis\":\"ip\",\"groupBy\":\"class\",\"aggrFunc\":\"avg\",\"aggrVar\":\"ip\",\"outlierCount\":50,\"dataX\":[-13.56,-13.4539,-13.347800000000001,-13.2417,-13.1356,-13.0295,-12.9234,-12.817300000000001,-12.7112,-12.6051,-12.499,-12.392900000000001,-12.2868,-12.1807,-12.0746,-11.9685,-11.862400000000001,-11.7563,-11.6502,-11.5441,-11.438,-11.331900000000001,-11.2258,-11.1197,-11.0136,-10.9075,-10.801400000000001,-10.6953,-10.5892,-10.4831,-10.377,-10.270900000000001,-10.1648,-10.0587,-9.9526,-9.8465,-9.740400000000001,-9.6343,-9.528200000000002,-9.4221,-9.316,-9.209900000000001,-9.1038,-8.997700000000002,-8.8916,-8.7855,-8.679400000000001,-8.5733,-8.4672,-8.3611,-8.255,-8.148900000000001,-8.0428,-7.9367,-7.8306000000000004,-7.724500000000001,-7.6184,-7.512300000000001,-7.4062,-7.3001000000000005,-7.194000000000001,-7.0879,-6.981800000000001,-6.8757,-6.7696000000000005,-6.663500000000001,-6.5574,-6.451300000000001,-6.3452,-6.2391000000000005,-6.133000000000001,-6.0269,-5.920800000000001,-5.8147,-5.708600000000001,-5.602500000000001,-5.496400000000001,-5.3903,-5.2842,-5.178100000000001,-5.072000000000001,-4.965900000000001,-4.8598,-4.7537,-4.647600000000001,-4.541500000000001,-4.435400000000001,-4.3293,-4.2232,-4.117100000000001,-4.011000000000001,-3.9049000000000014,-3.7988,-3.6927000000000003,-3.5866000000000007,-3.480500000000001,-3.3743999999999996,-3.2683,-3.1622000000000003,-3.0561000000000007],\"dataY\":[0,-0.16510000000000002,-0.33020000000000005,-0.4953,-0.6604000000000001,-0.8255000000000001,-0.9906,-1.1557000000000002,-1.3208000000000002,-1.4859,-1.6510000000000002,-1.8161,-1.9812,-2.1463,-2.3114000000000003,-2.4765,-2.6416000000000004,-2.8067,-2.9718,-3.1369000000000007,-3.3020000000000005,-3.4671000000000003,-3.6322,-3.7973000000000003,-3.9624,-4.1275,-4.2926,-4.4577,-4.622800000000001,-4.7879000000000005,-4.953,-5.118100000000001,-5.283200000000001,-5.448300000000001,-5.6134,-5.7785,-5.9436,-6.1087,-6.273800000000001,-6.438900000000001,-6.604000000000001,-6.769100000000001,-6.934200000000001,-7.0993,-7.2644,-7.429500000000001,-7.594600000000001,-7.7597000000000005,-7.9248,-8.089900000000002,-8.255,-8.420100000000001,-8.5852,-8.750300000000001,-8.9154,-9.0805,-9.245600000000001,-9.4107,-9.575800000000001,-9.740900000000002,-9.906,-10.071100000000001,-10.236200000000002,-10.4013,-10.566400000000002,-10.7315,-10.896600000000001,-11.0617,-11.2268,-11.3919,-11.557,-11.722100000000001,-11.8872,-12.0523,-12.2174,-12.382500000000002,-12.547600000000003,-12.712700000000002,-12.877800000000002,-13.042900000000001,-13.208000000000002,-13.3731,-13.538200000000002,-13.703300000000002,-13.868400000000001,-14.033500000000002,-14.1986,-14.363700000000001,-14.5288,-14.693900000000001,-14.859000000000002,-15.0241,-15.189200000000001,-15.3543,-15.519400000000001,-15.6845,-15.8496,-16.0147,-16.179800000000004,-16.344900000000003],\"yMax\":null,\"yMin\":null,\"sketchPoints\":[{\"points\":[{\"x\":-13.56,\"y\":0},{\"x\":-13.4539,\"y\":-0.16510000000000002},{\"x\":-13.347800000000001,\"y\":-0.33020000000000005},{\"x\":-13.2417,\"y\":-0.4953},{\"x\":-13.1356,\"y\":-0.6604000000000001},{\"x\":-13.0295,\"y\":-0.8255000000000001},{\"x\":-12.9234,\"y\":-0.9906},{\"x\":-12.817300000000001,\"y\":-1.1557000000000002},{\"x\":-12.7112,\"y\":-1.3208000000000002},{\"x\":-12.6051,\"y\":-1.4859},{\"x\":-12.499,\"y\":-1.6510000000000002},{\"x\":-12.392900000000001,\"y\":-1.8161},{\"x\":-12.2868,\"y\":-1.9812},{\"x\":-12.1807,\"y\":-2.1463},{\"x\":-12.0746,\"y\":-2.3114000000000003},{\"x\":-11.9685,\"y\":-2.4765},{\"x\":-11.862400000000001,\"y\":-2.6416000000000004},{\"x\":-11.7563,\"y\":-2.8067},{\"x\":-11.6502,\"y\":-2.9718},{\"x\":-11.5441,\"y\":-3.1369000000000007},{\"x\":-11.438,\"y\":-3.3020000000000005},{\"x\":-11.331900000000001,\"y\":-3.4671000000000003},{\"x\":-11.2258,\"y\":-3.6322},{\"x\":-11.1197,\"y\":-3.7973000000000003},{\"x\":-11.0136,\"y\":-3.9624},{\"x\":-10.9075,\"y\":-4.1275},{\"x\":-10.801400000000001,\"y\":-4.2926},{\"x\":-10.6953,\"y\":-4.4577},{\"x\":-10.5892,\"y\":-4.622800000000001},{\"x\":-10.4831,\"y\":-4.7879000000000005},{\"x\":-10.377,\"y\":-4.953},{\"x\":-10.270900000000001,\"y\":-5.118100000000001},{\"x\":-10.1648,\"y\":-5.283200000000001},{\"x\":-10.0587,\"y\":-5.448300000000001},{\"x\":-9.9526,\"y\":-5.6134},{\"x\":-9.8465,\"y\":-5.7785},{\"x\":-9.740400000000001,\"y\":-5.9436},{\"x\":-9.6343,\"y\":-6.1087},{\"x\":-9.528200000000002,\"y\":-6.273800000000001},{\"x\":-9.4221,\"y\":-6.438900000000001},{\"x\":-9.316,\"y\":-6.604000000000001},{\"x\":-9.209900000000001,\"y\":-6.769100000000001},{\"x\":-9.1038,\"y\":-6.934200000000001},{\"x\":-8.997700000000002,\"y\":-7.0993},{\"x\":-8.8916,\"y\":-7.2644},{\"x\":-8.7855,\"y\":-7.429500000000001},{\"x\":-8.679400000000001,\"y\":-7.594600000000001},{\"x\":-8.5733,\"y\":-7.7597000000000005},{\"x\":-8.4672,\"y\":-7.9248},{\"x\":-8.3611,\"y\":-8.089900000000002},{\"x\":-8.255,\"y\":-8.255},{\"x\":-8.148900000000001,\"y\":-8.420100000000001},{\"x\":-8.0428,\"y\":-8.5852},{\"x\":-7.9367,\"y\":-8.750300000000001},{\"x\":-7.8306000000000004,\"y\":-8.9154},{\"x\":-7.724500000000001,\"y\":-9.0805},{\"x\":-7.6184,\"y\":-9.245600000000001},{\"x\":-7.512300000000001,\"y\":-9.4107},{\"x\":-7.4062,\"y\":-9.575800000000001},{\"x\":-7.3001000000000005,\"y\":-9.740900000000002},{\"x\":-7.194000000000001,\"y\":-9.906},{\"x\":-7.0879,\"y\":-10.071100000000001},{\"x\":-6.981800000000001,\"y\":-10.236200000000002},{\"x\":-6.8757,\"y\":-10.4013},{\"x\":-6.7696000000000005,\"y\":-10.566400000000002},{\"x\":-6.663500000000001,\"y\":-10.7315},{\"x\":-6.5574,\"y\":-10.896600000000001},{\"x\":-6.451300000000001,\"y\":-11.0617},{\"x\":-6.3452,\"y\":-11.2268},{\"x\":-6.2391000000000005,\"y\":-11.3919},{\"x\":-6.133000000000001,\"y\":-11.557},{\"x\":-6.0269,\"y\":-11.722100000000001},{\"x\":-5.920800000000001,\"y\":-11.8872},{\"x\":-5.8147,\"y\":-12.0523},{\"x\":-5.708600000000001,\"y\":-12.2174},{\"x\":-5.602500000000001,\"y\":-12.382500000000002},{\"x\":-5.496400000000001,\"y\":-12.547600000000003},{\"x\":-5.3903,\"y\":-12.712700000000002},{\"x\":-5.2842,\"y\":-12.877800000000002},{\"x\":-5.178100000000001,\"y\":-13.042900000000001},{\"x\":-5.072000000000001,\"y\":-13.208000000000002},{\"x\":-4.965900000000001,\"y\":-13.3731},{\"x\":-4.8598,\"y\":-13.538200000000002},{\"x\":-4.7537,\"y\":-13.703300000000002},{\"x\":-4.647600000000001,\"y\":-13.868400000000001},{\"x\":-4.541500000000001,\"y\":-14.033500000000002},{\"x\":-4.435400000000001,\"y\":-14.1986},{\"x\":-4.3293,\"y\":-14.363700000000001},{\"x\":-4.2232,\"y\":-14.5288},{\"x\":-4.117100000000001,\"y\":-14.693900000000001},{\"x\":-4.011000000000001,\"y\":-14.859000000000002},{\"x\":-3.9049000000000014,\"y\":-15.0241},{\"x\":-3.7988,\"y\":-15.189200000000001},{\"x\":-3.6927000000000003,\"y\":-15.3543},{\"x\":-3.5866000000000007,\"y\":-15.519400000000001},{\"x\":-3.480500000000001,\"y\":-15.6845},{\"x\":-3.3743999999999996,\"y\":-15.8496},{\"x\":-3.2683,\"y\":-16.0147},{\"x\":-3.1622000000000003,\"y\":-16.179800000000004},{\"x\":-3.0561000000000007,\"y\":-16.344900000000003}],\"minX\":-13.56,\"maxX\":-2.95,\"minY\":-13.56,\"maxY\":-2.95,\"yAxis\":\"ip\",\"xAxis\":\"ip\",\"groupBy\":\"class\",\"aggrFunc\":\"avg\",\"aggrVar\":\"ip\"}],\"distanceNormalized\":false,\"outputNormalized\":false,\"clustering\":\"KMeans\",\"kMeansClusterSize\":3,\"distance_metric\":\"Euclidean\",\"predicateOperator\":\"=\",\"predicateColumn\":\"class\",\"predicateValue\":\"\",\"xRange\":[-13.56,-3.0561000000000007],\"considerRange\":true}";
//	    
//		try {
//			ZvMain zvMain = new ZvMain();
//			//zvMain.getInterfaceFomData(setDatabase);
//			zvMain.databaseName = "cmu";
//			zvMain.runDragnDropInterfaceQuerySeparated(input, "RepresentativeTrends");
//			System.out.println("asdf");
//			//assertFalse(outputGraphExecutor.equals(nullOutput));
//		} catch (IOException | InterruptedException e) {
//			// TODO Auto-generated catch block
//			e.printStackTrace();
//		}	
//	}
	
	@Test
	public void TestInputParsing() throws SQLException {
		long startTime = System.currentTimeMillis();
		
		String input = "{\"dataset\":\"cmu\",\"classes\":["
				+ "{\"name\":\"li\",\"values\":[[0,200],[201,2002]]},"
				+ "{\"name\":\"bp\",\"values\":[[0,90],[90,1000]]},"
				+ "{\"name\":\"lio2\",\"values\":[[0,5],[5,10],[10,13]]}"
				+ "]}";
	    
		try {
			ZvMain zvMain = new ZvMain();
			System.out.println("testing basic input parsing");
			zvMain.runCreateClasses(input);
			long endTime  = System.currentTimeMillis();
			
			long totalTime = endTime - startTime;
			System.out.println("TotalTime:"+totalTime/1000);
			
			//assertFalse(outputGraphExecutor.equals(nullOutput));
		} catch (IOException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}	
	}
}
	
